<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Update to currently accepted APC name and add APC/APNI name metadata — update_taxonomy • APCalign</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Update to currently accepted APC name and add APC/APNI name metadata — update_taxonomy"><meta name="description" content="For a list of taxon names aligned to the APC, update the name to an accepted
taxon concept per the APC and add scientific name and taxon concept metadata
to names aligned to either the APC or APNI."><meta property="og:description" content="For a list of taxon names aligned to the APC, update the name to an accepted
taxon concept per the APC and add scientific name and taxon concept metadata
to names aligned to either the APC or APNI."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">APCalign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/APCalign.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/articles/data-providers.html">Data sources (APC &amp; APNI)</a></li>
    <li><a class="dropdown-item" href="../articles/updating-taxon-names.html">Taxon matching</a></li>
    <li><a class="dropdown-item" href="../articles/reproducibility.html">Using APC versions for reproducibility</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/traitecoevo/APCalign/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Update to currently accepted APC name and add APC/APNI name metadata</h1>
      <small class="dont-index">Source: <a href="https://github.com/traitecoevo/APCalign/blob/2024-09-25/R/update_taxonomy.R" class="external-link"><code>R/update_taxonomy.R</code></a></small>
      <div class="d-none name"><code>update_taxonomy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>For a list of taxon names aligned to the APC, update the name to an accepted
taxon concept per the APC and add scientific name and taxon concept metadata
to names aligned to either the APC or APNI.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">update_taxonomy</span><span class="op">(</span></span>
<span>  <span class="va">aligned_data</span>,</span>
<span>  taxonomic_splits <span class="op">=</span> <span class="st">"most_likely_species"</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  resources <span class="op">=</span> <span class="fu"><a href="load_taxonomic_resources.html">load_taxonomic_resources</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-aligned-data">aligned_data<a class="anchor" aria-label="anchor" href="#arg-aligned-data"></a></dt>
<dd><p>A tibble of plant names to update. This table must
include 5 columns, original_name, aligned_name, taxon_rank,
taxonomic_dataset, and aligned_reason.
These columns are created by the function <code>align_taxa</code>.
The columns <code>original_name</code> and <code>aligned_name</code> must be in the format of the
scientific name, with genus and species,
and may contain additional qualifiers such as subspecies or varieties. The
names are case insensitive.</p></dd>


<dt id="arg-taxonomic-splits">taxonomic_splits<a class="anchor" aria-label="anchor" href="#arg-taxonomic-splits"></a></dt>
<dd><p>Variable that determines what protocol to use to
update taxon names that are ambiguous due to taxonomic splits.
The three options are:</p><ul><li><p><code>most_likely_species</code>, which returns the species name in use before the
split; alternative names are returned in a separate column</p></li>
<li><p><code>return_all</code>, which returns all possible names</p></li>
<li><p><code>collapse_to_higher_taxon</code>, which declares that an ambiguous name cannot
be aligned to an accepted species/infraspecific name and the name is
demoted to genus rank</p></li>
</ul></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical to indicate whether to display messages while updating
taxa.</p></dd>


<dt id="arg-output">output<a class="anchor" aria-label="anchor" href="#arg-output"></a></dt>
<dd><p>(optional) Name of the file where results are saved. The
default is NULL and no file is created. If specified, the output will be
saved in a CSV file with the given name.</p></dd>


<dt id="arg-resources">resources<a class="anchor" aria-label="anchor" href="#arg-resources"></a></dt>
<dd><p>the taxonomic resources required to make the summary
statistics.  Loading this can be slow, so call load_taxonomic_resources
separately to greatly speed this function up and pass the resources in.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with updated taxonomy for the specified plant names. The
tibble contains the following columns:</p><ul><li><p>original_name: the original plant name.</p></li>
<li><p>aligned_name: the input plant name that has been aligned to a taxon name
in the APC or APNI by the align_taxa function.</p></li>
<li><p>accepted_name: the APC-accepted plant name, when available.</p></li>
<li><p>suggested_name: the suggested plant name to use. Identical to the
accepted_name, when an accepted_name exists; otherwise the the suggested_name
is the aligned_name.</p></li>
<li><p>genus: the genus of the accepted (or suggested) name; only APC-accepted
genus names are filled in.</p></li>
<li><p>family: the family of the accepted (or suggested) name; only APC-accepted
family names are filled in.</p></li>
<li><p>taxon_rank: the taxonomic rank of the suggested (and accepted) name.</p></li>
<li><p>taxonomic_dataset: the source of the suggested (and accepted) names (APC or
APNI).</p></li>
<li><p>taxonomic_status: the taxonomic status of the suggested (and accepted) name.</p></li>
<li><p>taxonomic_status_aligned: the taxonomic status of the aligned name, before
any taxonomic updates have been applied.</p></li>
<li><p>aligned_reason: the explanation of a specific taxon name alignment (from an
original name to an aligned name).</p></li>
<li><p>update_reason: the explanation of a specific taxon name update (from an
aligned name to an accepted or suggested name).</p></li>
<li><p>subclass: the subclass of the accepted name.</p></li>
<li><p>taxon_distribution: the distribution of the accepted name; only filled in
if an APC accepted_name is available.</p></li>
<li><p>scientific_name_authorship: the authorship information for the accepted
(or synonymous) name; available for both APC and APNI names.</p></li>
<li><p>taxon_ID: the unique taxon concept identifier for the accepted_name; only
filled in if an APC accepted_name is available.</p></li>
<li><p>taxon_ID_genus: an identifier for the genus; only filled in if an
APC-accepted genus name is available.</p></li>
<li><p>scientific_name_ID: an identifier for the nomenclatural (not taxonomic)
details of a scientific name; available for both APC and APNI names.</p></li>
<li><p>row_number: the row number of a specific original_name in the input.</p></li>
<li><p>number_of_collapsed_taxa: when taxonomic_splits == "collapse_to_higher_taxon",
the number of possible taxon names that have been collapsed.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p>This function uses the APC to update the taxonomy of names aligned to a
taxon concept listed in the APC to the currently accepted name for the taxon
concept.</p></li>
<li><p>The aligned_data data frame that is input must contain 5 columns,
<code>original_name</code>, <code>aligned_name</code>, <code>taxon_rank</code>, <code>taxonomic_dataset</code>, and
<code>aligned_reason</code>. (These are the columns output by the function <code>align_taxa</code>.)</p></li>
<li><p>The aligned name is a plant name that has been aligned to a taxon name in
the APC or APNI by the align_taxa function.</p></li>
</ul><p>Notes:</p><ul><li><p>As the input for this function is a table with 5 columns (output by
align_taxa), this function will only be used when you explicitly want to
separate the alignment and updating components of APCalign. This function is
the second half of create_taxonomic_update_lookup.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>load_taxonomic_resources</p>
<p>Other taxonomic alignment functions:
<code><a href="align_taxa.html">align_taxa</a>()</code>,
<code><a href="create_taxonomic_update_lookup.html">create_taxonomic_update_lookup</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Update taxonomy for two plant names and print the result</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">resources</span> <span class="op">&lt;-</span> <span class="fu"><a href="load_taxonomic_resources.html">load_taxonomic_resources</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading resources into memory...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================================================================================================</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ...done</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">update_taxonomy</span><span class="op">(</span></span></span>
<span class="r-in"><span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   original_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dryandra preissii"</span>, <span class="st">"Banksia acuminata"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   aligned_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dryandra preissii"</span>, <span class="st">"Banksia acuminata"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   taxon_rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"species"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   taxonomic_dataset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"APC"</span>, <span class="st">"APC"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   aligned_reason <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>   <span class="cn">NA_character_</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span>,</span></span>
<span class="r-in"><span> resources <span class="op">=</span> <span class="va">resources</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 21</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   original_name     aligned_name      accepted_name  suggested_name genus family</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Dryandra preissii Dryandra preissii Banksia acumi… Banksia acumi… Bank… Prote…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Banksia acuminata Banksia acuminata Banksia acumi… Banksia acumi… Bank… Prote…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 15 more variables: taxon_rank &lt;chr&gt;, taxonomic_dataset &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   taxonomic_status &lt;chr&gt;, taxonomic_status_aligned &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   aligned_reason &lt;chr&gt;, update_reason &lt;chr&gt;, subclass &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   taxon_distribution &lt;chr&gt;, scientific_name &lt;chr&gt;, taxon_ID &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   taxon_ID_genus &lt;chr&gt;, scientific_name_ID &lt;chr&gt;, canonical_name &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   row_number &lt;dbl&gt;, number_of_collapsed_taxa &lt;dbl&gt;</span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Falster, Elizabeth Wenk, Will Cornwell, Fonti Kar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

